---
id: "14"
title: "【C#】プロパティとメンバ変数の違い"
date: "2022-10-18"
tags: [Csharp, backend]
---

　

## プロパティとは

クラス外部から見るとメンバー変数のようにふるまい、クラス内部から見るとメソッドのようにふるまうもの。

JavaやC++はこの機能を持っていない。C#が持つ便利な機能。

- プロパティ: 中（実装側）からはメソッドのように扱え、外（利用側）からはメンバー変数のように見えるもの。
- 実装の隠蔽（カプセル化）を崩すことなく、アクセサー関数の煩雑さを解消。

参考: [https://ufcpp.net/study/csharp/oo_property.html](https://ufcpp.net/study/csharp/oo_property.html)

　

Javaなどではアクセサーのメソッド名は

```csharp
String hoge = sampleClass.GetHoge() 
```

などのように、メソッド名にGetやSetがついた命名のメソッドを呼び出します。

　

クラス側としては、オブジェクトの状態を操作する際はメソッドを通して行った方が良いためこのようになっていますが、クラス呼び出し側からすると非常に読みづらいものにもなります。

そのため、C#ではプロパティという機能で、クラス呼び出し側からは以下のように呼び出すことができるようになっています

```csharp
string hoge = sampleClass.Hoge;
```

Getや()がなく、かなりすっきり読めるようになりました。

これが「クラス利用側から見るとメンバ変数のように振る舞う」という意味合いです。

　

逆に、クラス内部ではメソッドのように振る舞います。

こちらがどういうことか見ていきます。

　

## プロパティはメンバ変数（フィールド）にアクセスするための手段

メンバ変数はフィールドともいいます。

「プロパティ」とは値そのものをいうのではなく、このメンバ変数にアクセスするための仕組みです。

以下のようなクラスがあったとして

```csharp
public class Sample
{
    // メンバ変数
    private string name;
    private int age;

    // プロパティ
    public string Name
    {
        get 
        { 
            return name;
        }
        set
        {
            name = value;
        }
    }

    public int age
    {
        get 
        { 
            return name;
        }
        set
        {
            name = value;
        }
    }
}
```

このように、メンバ変数にget, setアクセスするためのメソッドをプロパティと呼びます。

プロパティはメンバ変数にアクセスするための「メソッドの一種」といえます。

参考: [https://www.w2solution.co.jp/tech/2021/05/30/糸賀cにおけるメソッドとプロパティの違/](https://www.w2solution.co.jp/tech/2021/05/30/%E7%B3%B8%E8%B3%80c%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%A8%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%81%AE%E9%81%95/)

C#の変数宣言はcamelCaseですが、クラス内でプロパティを宣言するときはPascalCaseなので前からちょっと「あれ？」と思っていました。
プロパティと変数宣言は全くの別物で、プロパティ名の宣言はメソッドの宣言と同義だから先頭が大文字だったんですね。すっきり。

　

Tips

【メンバ変数とフィールドの違い】

基本的には同じ意味で、**インスタンス変数**を表すときに用いられる。

static修飾子などがついた変数は**クラス変数**といい、こちらは「静的メンバ」「静的フィールド」などと呼ばれる。

「フィールド」はクラスの視点で見た時の言い方。

メンバ変数は「クラスの中にある（クラスの中でどこからでもアクセスできる）変数」を表したい時の言い方。

みたいな感じで理解していて問題はなさそう。

　

## 自動実装プロパティ

C# 3.0より、自動実装プロパティという機能が実装されました。

（現在の最新はC# 10 https://learn.microsoft.com/ja-jp/dotnet/csharp/whats-new/csharp-10?source=recommendations）

上のようなコードは、以下のように実装しても同じです。

```csharp
class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
}
```

かなり省略され、見やすくなりました。

　

このコードにも前述のコードと同じように、暗黙的に以下のようなprivateのメンバ変数が定義されています。

```csharp
    private string name;
    private int age;
```

読み取り専用のプロパティとして設定したい場合は、以下のようにsetにprivateを指定することで、クラス内からしかメンバ変数の値を変更できなくなります。

```csharp
class Person
{
    public string Name { get; private set; }
    public int Age { get; set; }
}
```

気軽に変更したくないメンバ変数はsetをprivateにすることで、クラス外部から値を変更できなくなり、より安全性の高いクラスを設計できます。

設計についてはまた別の記事にて……

以上です！